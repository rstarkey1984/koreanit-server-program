# 프로젝트에 공통으로 적용되는 구조와 흐름

이 문서는 특정 언어나 프레임워크의 문법을 설명하지 않는다.
대신 **스프링 부트를 포함한 대부분의 현대적 소프트웨어가 전제로 삼고 있는, 모든 코딩에 공통으로 적용되는 구조 원칙**을 설명하고, 그 핵심을 **구조와 흐름의 구분**으로 정리한다.

이 원칙은 웹, 서버, 배치, 콘솔 프로그램을 가리지 않고 동일하게 적용된다.

---

## 1. 모든 코드는 두 가지로 구성된다

모든 프로그램은 결국 다음 두 요소로만 구성된다.

1. **구조(Structure)**
2. **흐름(Flow)**

이 둘이 명확히 분리되지 않으면, 코드의 구조적 일관성을 유지하기 어렵다.

---

## 2. 구조란 무엇인가

구조란 프로그램이 실행되기 전에 이미 결정되어 있어야 하는 요소들이다.

구조는 다음 질문에 답한다.

* 이 코드는 어떤 역할을 수행하는가?
* 어떤 코드가 어떤 코드에 의존하는가?
* 객체나 모듈은 어디에서 생성되는가?

스프링 부트에서 말하는 Bean 구성, 의존성 주입, 계층 구조는 모두 구조의 영역에 속한다.

### 구조의 예시

```java
public class UserService {

    private final UserRepository userRepository;

    public UserService(UserRepository userRepository) {
        this.userRepository = userRepository;
    }
}
```

이 클래스가 표현하는 것은 처리 로직이 아니라 **관계와 책임**이다.

* UserService는 UserRepository에 의존한다
* 어떤 구현체인지는 알 필요가 없다
* 이 관계는 실행 중에 변경되지 않는다

구조의 핵심 특징은 하나다.

> **구조는 실행 중에 변경되지 않는다**

---

## 3. 흐름이란 무엇인가

흐름이란 프로그램이 실행되면서 실제로 수행되는 처리 과정이다.

흐름은 다음 질문에 답한다.

* 어떤 입력을 받는가?
* 어떤 순서로 처리되는가?
* 어떤 결과를 반환하는가?

흐름은 주로 함수나 메서드로 표현되며, 상황과 요구사항에 따라 계속 달라진다.

### 흐름의 예시

```java
public User getUser(Long id) {
    validate(id);
    User user = userRepository.findById(id);
    increaseViewCount(user);
    return user;
}
```

이 메서드는

* 객체를 생성하지 않고
* 구현체를 선택하지 않으며
* 오직 실행 흐름만 표현한다

> **흐름은 실행 시점마다 달라질 수 있다**

---

## 4. 구조와 흐름의 정확한 대응 관계

실무적으로는 흔히 이렇게 말할 수 있다.

> 구조는 클래스고, 흐름은 메서드다

이 표현은 큰 틀에서는 맞지만, 문서적으로는 다음과 같이 정리하는 것이 정확하다.

> **구조는 클래스 단위에서 결정되고,
> 흐름은 메서드 단위에서 표현된다**

즉,

* 구조를 담당하는 최소 단위는 **클래스(또는 모듈)** 이고
* 흐름을 담당하는 최소 단위는 **메서드(또는 함수)** 다

---

## 5. 왜 구조는 클래스인가

클래스는 프로그램에서 다음을 고정한다.

* 이 코드의 책임은 무엇인가
* 어떤 코드들과 협력하는가
* 어떤 의존성을 가지는가

클래스가 결정하는 것은 **무엇을 어떻게 처리할지**가 아니라,
**누구와 협력할지**다.

이 결정은 실행 중에 바뀌면 안 된다.

---

## 6. 왜 흐름은 메서드인가

메서드는 실행 시점에 다음을 표현한다.

* 입력을 받아
* 의미 있는 순서로 처리하고
* 결과를 반환한다

메서드는 시간의 흐름에 따라 여러 번 호출되며,
상황에 따라 다른 실행 경로를 가질 수 있다.

즉, 메서드는 **변하는 것**을 담당한다.

---

## 7. 구조와 흐름의 역할 차이

| 구분    | 구조 (Structure) | 흐름 (Flow) |
| ----- | -------------- | --------- |
| 책임    | 역할과 관계         | 처리 순서와 의미 |
| 단위    | 클래스 / 모듈       | 메서드 / 함수  |
| 결정 시점 | 실행 전           | 실행 중      |
| 변경 빈도 | 거의 없음          | 자주 변경     |
| 대표 요소 | 의존성, 계층        | 비즈니스 로직   |

---

## 8. 구조와 흐름이 섞일 때의 문제

다음과 같은 코드가 보이기 시작하면 구조와 흐름이 섞이고 있다는 신호다.

```java
public User getUser(Long id) {
    UserRepository repo = new JdbcUserRepository();
    return repo.findById(id);
}
```

이 코드의 문제는 기능이 아니라 **책임의 위치**다.

* 메서드가 구현을 선택하고
* 구조 결정을 실행 중에 수행한다

이 순간부터 구조는 불안정해지고,
변경 비용과 테스트 비용은 급격히 증가한다.

---

## 9. 프레임워크의 역할

스프링 부트와 같은 프레임워크는 새로운 개념을 만드는 도구가 아니다.

프레임워크의 역할은 명확하다.

* 구조를 애플리케이션 바깥에서 결정하게 만들고
* 흐름을 애플리케이션 안에서 단순하게 유지하도록 강제한다

프레임워크가 달라져도 이 원칙 자체는 변하지 않는다.

---

## 이 장의 핵심 정리

이 문서는 다음 한 문장으로 요약된다.

> **구조는 실행 중에 바뀌지 않는 관계와 책임이고,
> 흐름은 그 구조 위에서 실행되는 처리 과정이다**

이 구분이 유지되는 한,
언어와 프레임워크가 바뀌어도 코드는 쉽게 무너지지 않는다.

## 다음 단계

→ [**Spring Boot 애플리케이션 전체 흐름**](13-springboot_flow.md)