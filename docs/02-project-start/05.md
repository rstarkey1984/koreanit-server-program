# Map / List로 DB 결과 흉내내기

> DB가 없어도 **DB 조회 결과의 형태**를 정확히 이해하고,
> JDBC → API 응답(JSON)으로 이어지는 흐름을 자연스럽게 연결한다.

---

## 1. 이번 실습에서 확인할 질문

* `Map<String, Object>` 는 무엇을 의미하는가?
* JDBC 결과가 API 응답(JSON)으로 어떻게 바뀌는가?

---

## 2. DB 조회 결과의 실제 모습 (개념)

DB에서 조회한 결과는 보통 이런 형태다.

```text
id | username | nickname
---+----------+----------
1  | user1    | 철수
2  | user2    | 영희
```

핵심:

* **행(Row)** 여러 개
* **열(Column)** 여러 개

---

## 3. Row를 Map으로 표현하기
> `Map<String, Object>`는 "컬럼명 → 값" 형태로 표현한 DB 한 행(Row)이다.

### 한 줄(Row) = Map

```java
Map<String, Object> row = new HashMap<>();
row.put("id", 1);
row.put("username", "user1");
row.put("nickname", "철수");
```

* key : String   → 컬럼명
* value : Object → 컬럼 값 

> Object는 ‘타입을 모를 때 쓰는 최상위 타입’

---

## 4. ResultSet을 List로 표현하기

### 여러 줄(ResultSet) = `List<Map>`

```java
List<Map<String, Object>> rows = new ArrayList<>();

rows.add(Map.of(
    "id", 1,
    "username", "user1",
    "nickname", "철수"
));

rows.add(Map.of(
    "id", 2,
    "username", "user2",
    "nickname", "영희"
));
```

구조 요약:

```text
List
 ├─ Map (row 1)
 ├─ Map (row 2)
 └─ ...
```

---

## 5. Repository에서 조회 결과 반환하기

`UserRepository.java` interface 코드 추가
```java
List<Map<String, Object>> findAll();
```

`MemoryUserRepository.java` 구현체 코드 추가
```java
public List<Map<String, Object>> findAll() {

    List<Map<String, Object>> result = new ArrayList<>();

    result.add(Map.of(
        "id", 1,
        "username", "user1",
        "nickname", "철수"
    ));

    result.add(Map.of(
        "id", 2,
        "username", "user2",
        "nickname", "영희"
    ));

    return result;
}
```


---

## 6. Service는 구조를 해석하지 않는다

```java
public List<Map<String, Object>> getUsers() {
    return userRepository.findAll();
}
```

---

## 7. Controller는 그대로 전달한다

```java
public void list() {
  System.out.println(userService.getUsers());
}
```

출력 예:

```text
[{id=1, username=user1, nickname=철수}, {id=2, username=user2, nickname=영희}]
```

---

## 8. 이 구조가 JSON이 된다

위 출력 구조는 JSON으로 바꾸면 다음과 같다.

```json
[
  {"id":1,"username":"user1","nickname":"철수"},
  {"id":2,"username":"user2","nickname":"영희"}
]
```

> **`List<Map>` 구조 = JSON 배열 + 객체**

---

## 9. JDBC와 1:1 대응

| 지금(Map/List) | JDBC          |
| ------------ | ------------- |
| Map          | ResultSet 한 줄 |
| List         | ResultSet 전체  |
| key          | 컬럼명           |
| value        | 컬럼 값          |

---

> DB가 주는 건 “행과 열로 된 구조”일 뿐이고, 객체는 우리가 나중에 “해석해서 만든 결과물”이다.


## 다음 단계

→ [**Spring Boot 프로젝트 생성 및 실행**](/docs/03-server-implementation/01-spring_boot_project_setup.md)
