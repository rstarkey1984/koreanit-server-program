# 기본 리팩토링

이 장에서는
지금까지 구현한 서버 코드를 기능 변경 없이 정리하며
**서버 구조를 안정적인 상태로 마무리**한다.

리팩토링은
새로운 기능을 추가하는 작업이 아니라,
**기존 구조를 더 명확하게 만드는 작업**이다.

---

## 강의 목표

* 리팩토링의 목적을 정확히 이해한다
* 기능 변경 없는 코드 정리의 기준을 설명할 수 있다
* 서버 코드에서 자주 발생하는 구조적 문제를 인식한다
* 이후 확장을 고려한 코드 상태를 만든다

---

## 1. 리팩토링이란 무엇인가

리팩토링(refactoring)은
**외부 동작을 바꾸지 않고 내부 구조를 개선하는 작업**이다.

즉:

* API 동작 동일
* 응답 결과 동일
* 코드 구조만 개선

> 리팩토링은 "고치는 것"이 아니라
> "정리하는 것"이다.

---

## 2. 리팩토링이 필요한 시점

다음 신호가 보이면
리팩토링을 고려해야 한다.

* 메서드가 너무 길다
* 한 클래스가 너무 많은 책임을 가진다
* 같은 코드가 여러 곳에 반복된다
* 이름만 보고 역할이 보이지 않는다

---

## 3. 서버 코드에서 자주 보이는 문제

서버 프로젝트에서 흔히 발생하는 문제는 다음과 같다.

* Controller에 로직이 섞여 있음
* Service가 비대해짐
* Repository가 비즈니스 의미를 알기 시작함

이 문제들은
초기에 바로잡는 것이 중요하다.

---

## 4. 리팩토링 기본 기준

리팩토링 시 지켜야 할 기준은 단순하다.

* 책임이 명확한가
* 이름만 보고 역할이 보이는가
* 한 변경이 한 곳에만 영향을 주는가

> 구조를 흔들지 않는 선에서 정리한다.

---

## 5. 리팩토링과 테스트의 관계

리팩토링은
테스트가 있을수록 안전하다.

하지만 이 과정에서는
다음 원칙을 지킨다.

* 작은 단위로 수정
* 즉시 실행 확인

> 기능 추가 전에 구조를 정리하는 습관이 중요하다.

---

## 6. 지금 단계에서 하지 않는 것

이 장에서는 다음을 다루지 않는다.

* 성능 튜닝
* 대규모 구조 변경
* 디자인 패턴 적용

이 단계의 목적은
**안정적인 기준점 만들기**다.

---

## 이 장의 핵심 정리

* 리팩토링은 기능 변경이 아니다
* 책임과 구조를 정리하는 작업이다
* 작은 개선을 반복한다
* 좋은 구조는 다음 개발을 쉽게 만든다

---

## 마무리

이 장을 끝으로
**02-server-implementation** 파트가 마무리된다.

이제 서버는:

* 요청 흐름이 명확하고
* 계층 책임이 분리되어 있으며
* DB 연동이 가능한 상태다

다음 단계에서는
이 구조를 바탕으로
공통 모듈, 배치/워커, 운영 환경으로 확장해 나간다.

---

## 다음 단계

→ [**공통 모듈 구현하기**](/docs/03-common-modules/README.md)