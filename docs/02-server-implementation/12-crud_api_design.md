# CRUD API 설계

이 장에서는
지금까지 설계한 서버 구조를 실제로 사용해
**CRUD API를 어떻게 설계해야 하는지의 기준**을 정한다.

여기서의 핵심은
코드를 많이 작성하는 것이 아니라,
**"이 API가 왜 이 구조를 가지는가"를 설명할 수 있게 되는 것**이다.

---

## 강의 목표

* CRUD의 의미를 정확히 설명할 수 있다
* HTTP 메서드와 CRUD의 관계를 이해한다
* URL 설계 기준을 설명할 수 있다
* Controller / Service / Repository의 역할 분리를 유지한 채 API를 설계한다

---

## 1. CRUD란 무엇인가

CRUD는
서버가 데이터를 다루는 가장 기본적인 네 가지 작업이다.

* **Create** : 데이터 생성
* **Read** : 데이터 조회
* **Update** : 데이터 수정
* **Delete** : 데이터 삭제

대부분의 서버 API는
이 네 가지 동작을 기준으로 설계된다.

---

## 2. HTTP 메서드와 CRUD의 관계

HTTP는
요청의 **의도**를 메서드로 표현한다.

| CRUD   | HTTP 메서드    | 의미         |
| ------ | ----------- | ---------- |
| Create | POST        | 새로운 데이터 생성 |
| Read   | GET         | 데이터 조회     |
| Update | PUT / PATCH | 데이터 수정     |
| Delete | DELETE      | 데이터 삭제     |

> URL은 자원(resource)을 표현하고,
> HTTP 메서드는 행위를 표현한다.

---

## 3. URL 설계 기본 원칙

URL은
**무엇을 다루는지**를 나타내야 한다.

좋은 URL의 특징:

* 명사 사용
* 복수형 사용
* 동사 사용 금지

예:

```text
/users
/users/{id}
```

---

## 4. 사용자(User) API 예시

사용자 데이터를 다루는 API를 예로 들어본다.

```text
GET    /users        전체 사용자 조회
GET    /users/{id}   사용자 상세 조회
POST   /users        사용자 생성
PUT    /users/{id}   사용자 수정
DELETE /users/{id}   사용자 삭제
```

이 설계만 보고도
어떤 동작을 하는 API인지 알 수 있어야 한다.

---

## 5. 계층별 책임 다시 정리

CRUD API를 구현할 때도
기존 계층 구조는 변하지 않는다.

### Controller

* HTTP 요청 수신
* 요청 값 검증
* Service 호출

### Service

* 비즈니스 흐름 제어
* 트랜잭션 경계 설정

### Repository

* SQL 실행
* 데이터 조회/저장

> CRUD가 추가되어도
> 계층 책임은 절대 섞이지 않는다.

---

## 6. 이 장에서 하지 않는 것

이 장에서는 다음을 다루지 않는다.

* 실제 SQL 작성
* DTO 상세 설계
* 입력값 검증 로직
* 예외 처리 구현

이 내용들은
다음 단계에서 하나씩 다룬다.

---

## 이 장의 핵심 정리

* CRUD는 서버 API의 기본 단위다
* HTTP 메서드와 URL은 명확한 역할이 있다
* API 설계는 구조를 드러내야 한다
* 기존 계층 분리를 유지하는 것이 가장 중요하다

---

## 다음 단계

→ [**에러 처리 전략**](13-error_handling_strategy.md)