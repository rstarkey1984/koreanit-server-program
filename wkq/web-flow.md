# 브라우저에서 `www.google.com`을 입력했을 때의 전체 흐름

이 문서는 사용자가 브라우저 주소창에 `www.google.com`을 입력했을 때
네트워크부터 서버 내부 처리까지 실제로 어떤 단계가 순서대로 발생하는지를 설명한다.

---

## 1. URL 입력 (브라우저 단계)

![클라이언트-서버 모델](https://lh3.googleusercontent.com/d/1Ytos16Ll_nOcL2KuZw-c8Yv5QvYfIsdt)

사용자가 브라우저 주소창에 다음을 입력한다.

```
https://www.google.com
```

브라우저는 이를 다음 요소로 해석한다.

* 프로토콜: `https`
* 도메인: `www.google.com`
* 포트: 443 (HTTPS 기본 포트)
* 경로: `/`

---

## 2. DNS 조회 (도메인 → IP)

브라우저는 도메인 이름으로는 통신할 수 없기 때문에,
먼저 **IP 주소를 알아내는 과정(DNS 조회)** 을 수행한다.

일반적인 조회 순서:

1. 브라우저 DNS 캐시
2. 운영체제 DNS 캐시
3. 공유기 / 로컬 DNS
4. ISP DNS 서버
5. 루트 DNS → TLD DNS → 권한 DNS

결과 예시:

```
www.google.com → 142.250.xxx.xxx
```

---

## 3. TCP 연결 수립 (3-way handshake)

IP 주소를 알게 되면, 브라우저는 서버와 TCP 연결을 생성한다.

과정:

1. 클라이언트 → 서버 : SYN
2. 서버 → 클라이언트 : SYN + ACK
3. 클라이언트 → 서버 : ACK

이 단계에서 **신뢰 가능한 통신 경로**가 만들어진다.

---

## 4. TLS 핸드셰이크 (HTTPS 암호화)

HTTPS 요청이므로, TCP 연결 이후 암호화 통신을 위한 TLS 과정이 진행된다.

핵심 단계:

* 서버가 SSL 인증서 전달
* 브라우저가 인증서 유효성 검증
* 대칭키 생성 및 공유
* 이후 모든 HTTP 데이터는 암호화됨

---

## 5. HTTP 요청 전송

브라우저는 암호화된 채널 위에서 HTTP 요청을 보낸다.

개념적 예시:

```
GET / HTTP/1.1
Host: www.google.com
User-Agent: Chrome
Accept: text/html
```

---

## 6. 웹 서버(Web Server) 처리

요청은 서버 측의 웹 서버에 가장 먼저 도착한다.

웹 서버의 역할:

* HTTPS 종료(TLS 처리)
* 요청 수신 및 정리
* 정적 파일 처리
* 애플리케이션 서버(WAS)로 요청 전달

이 단계에서는 비즈니스 로직이 실행되지 않는다.

---

## 7. 애플리케이션 서버(WAS) 처리

웹 서버가 전달한 요청을 애플리케이션 서버가 처리한다.

이 단계에서 수행되는 작업:

* 요청 분석
* 사용자 상태 판단
* 서비스 로직 실행
* 응답 데이터 생성

---

## 8. 데이터 접근 (필요한 경우)

애플리케이션 서버는 필요한 경우 내부 데이터 시스템과 통신한다.

예:

* 캐시 시스템
* 검색 인덱스
* 데이터 저장소

이를 조합해 최종 응답 데이터를 만든다.

---

## 9. HTTP 응답 반환

서버는 처리 결과를 HTTP 응답으로 브라우저에 전달한다.

예시:

```
HTTP/1.1 200 OK
Content-Type: text/html
```

응답 본문에는 HTML, CSS, JavaScript 정보가 포함된다.

---

## 10. 브라우저 렌더링

브라우저는 응답을 받아 화면을 구성한다.

렌더링 순서:

1. HTML 파싱 → DOM 생성
2. CSS 적용
3. JavaScript 실행
4. 추가 리소스 요청
5. 화면 표시

---

## 전체 흐름 요약

```
URL 입력
→ DNS 조회
→ TCP 연결
→ TLS 암호화
→ HTTP 요청
→ Web Server
→ WAS
→ 데이터 처리
→ HTTP 응답
→ 브라우저 렌더링
```